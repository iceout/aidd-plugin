{
  "metadata": {
    "lastUpdated": "2024-05-14",
    "maintainer": "workflow-team",
    "notes": "Adjust the mode key and related templates if you need to support additional workflows."
  },
  "commit": {
    "mode": "ticket-prefix",
    "fields": {
      "ticket": "Required ticket identifier (for example ABC-123). Used in ticket-prefix and mixed modes.",
      "type": "Base change type (feat, fix, chore, docs, test, refactor, perf, build, ci, revert).",
      "scope": "Logical area or module (checkout, payments, infra)."
    },
    "modes": {
      "ticket-prefix": {
        "description": "The commit message starts with the ticket followed by a colon.",
        "template": "<TICKET>: <summary>",
        "example": "STORE-123: implement rule engine",
        "usage": "Use this when every commit must reference a ticket id."
      },
      "conventional": {
        "description": "Follows the Conventional Commits specification.",
        "template": "<type>(<scope>): <summary>",
        "example": "feat(checkout): add retry on failure",
        "usage": "Use when you rely on typed commits and autogenerated changelog entries."
      },
      "mixed": {
        "description": "Hybrid mode: prepends the ticket while keeping type/scope.",
        "template": "<TICKET> <type>(<scope>): <summary>",
        "example": "STORE-123 feat(payments): add 3ds redirect",
        "usage": "Recommended when you need both ticket references and the Conventional format."
      }
    }
  },
  "branch": {
    "defaultPrefix": "feature",
    "naming": {
      "feature": {
        "pattern": "feature/<TICKET>",
        "example": "feature/STORE-123",
        "when": "Primary development for a ticket."
      },
      "fix": {
        "pattern": "fix/<scope>",
        "example": "fix/checkout-errors",
        "when": "Small adjustments without a dedicated ticket."
      },
      "hotfix": {
        "pattern": "hotfix/<TICKET>",
        "example": "hotfix/STORE-999",
        "when": "Urgent production fix."
      },
      "mixed": {
        "pattern": "feature/<TICKET>-<type>/<scope>",
        "example": "feature/STORE-123-feat/payments",
        "when": "Mixed-mode teams that want ticket + type + scope."
      }
    },
    "notes": "Extend the naming map if you rely on additional branch types."
  },
  "review": {
    "guidelines": [
      "Commit messages must match the active mode.",
      "Branches are created only via the approved prefixes (feature/fix/hotfix/mixed).",
      "Update conventions.md manually before a release to capture the current rules."
    ]
  },
  "rlm": {
    "max_files": 500,
    "max_links": 2000,
    "max_file_bytes": 200000,
    "targets_mode": "auto",
    "worklist_paths": [],
    "worklist_keywords": [],
    "worklist_max_entries": 500,
    "rg_timeout_s": 6,
    "rg_batch_size": 24,
    "max_symbols_per_file": 40,
    "max_definition_hits_per_symbol": 5,
    "link_key_calls_source": "key_calls",
    "link_type_refs_mode": "additive",
    "link_type_refs_priority": "prefer",
    "link_unverified_warn_ratio": 0.5,
    "link_rg_verify": "auto",
    "type_refs_include_prefixes": [],
    "type_refs_exclude_prefixes": [
      "java.",
      "jakarta.",
      "org.springframework."
    ],
    "link_target_threshold": 500,
    "dir_children_limit": 50,
    "dir_summary_max_chars": 600,
    "pack_budget": {
      "max_chars": 12000,
      "max_lines": 240,
      "entrypoints": 20,
      "hotspots": 20,
      "integration_points": 20,
      "test_hooks": 15,
      "recommended_reads": 15,
      "evidence_snippet_chars": 160,
      "trim_priority": [
        "entrypoints",
        "hotspots",
        "integration_points",
        "test_hooks",
        "risks",
        "recommended_reads",
        "links"
      ],
      "enforce": false
    },
    "slice_budget": {
      "max_nodes": 20,
      "max_links": 40
    },
    "ignore_dirs": [
      ".git",
      ".gradle",
      ".idea",
      ".venv",
      "aidd",
      "build",
      "dist",
      "node_modules",
      "out",
      "output",
      "target",
      "vendor"
    ],
    "exclude_path_prefixes": [
      "aidd/docs",
      "aidd/reports",
      "aidd/.cache"
    ]
  },
  "researcher": {
    "defaults": {
      "paths": [
        "src/main",
        "src/test",
        "docs/prd",
        "docs/plan"
      ],
      "docs": [
        "docs/prd",
        "docs/plan"
      ],
      "keywords": []
    },
    "keyword_settings": {
      "min_len": 3,
      "max_count": 25,
      "short_whitelist": [
        "kt",
        "kts",
        "js",
        "ts"
      ],
      "stopwords": [
        "in",
        "and",
        "not",
        "for",
        "all",
        "how",
        "this",
        "it",
        "the",
        "a",
        "an",
        "or",
        "to",
        "of"
      ]
    },
    "ignore_dirs": [
      ".git",
      ".gradle",
      ".idea",
      ".venv",
      "aidd",
      "build",
      "dist",
      "node_modules",
      "out",
      "output",
      "target",
      "vendor"
    ],
    "path_discovery": {
      "max_discovered": 12
    },
    "auto_tags": {
      "jvm": {
        "slug_keywords": [
          "jvm",
          "java",
          "kotlin",
          "spring",
          "gradle"
        ],
        "path_markers": [
          "src/main/java",
          "src/main/kotlin",
          "build.gradle",
          "settings.gradle"
        ]
      },
      "web": {
        "slug_keywords": [
          "web",
          "frontend",
          "react",
          "vue",
          "next"
        ],
        "path_markers": [
          "frontend",
          "web",
          "apps/web",
          "packages/web"
        ]
      },
      "mobile": {
        "slug_keywords": [
          "mobile",
          "android",
          "ios"
        ],
        "path_markers": [
          "android",
          "ios",
          "mobile",
          "app/src"
        ]
      },
      "common": {
        "slug_keywords": [
          "common",
          "shared",
          "core"
        ],
        "path_markers": [
          "common",
          "shared",
          "core"
        ]
      }
    },
    "tags": {
      "jvm": {
        "description": "JVM services and libraries.",
        "paths": [],
        "docs": [],
        "keywords": [
          "java",
          "kotlin",
          "spring",
          "gradle"
        ]
      },
      "web": {
        "description": "Web/frontend modules.",
        "paths": [],
        "docs": [],
        "keywords": [
          "web",
          "frontend",
          "react",
          "vue"
        ]
      },
      "mobile": {
        "description": "Mobile (Android/iOS) modules.",
        "paths": [],
        "docs": [],
        "keywords": [
          "android",
          "ios",
          "mobile"
        ]
      },
      "common": {
        "description": "Shared/common modules.",
        "paths": [],
        "docs": [],
        "keywords": [
          "common",
          "shared",
          "core"
        ]
      },
      "checkout": {
        "description": "Checkout and payment modules.",
        "paths": [
          "src/main/kotlin",
          "src/test/kotlin"
        ],
        "docs": [
          "docs/prd/demo-checkout.prd.md",
          "docs/plan/demo-checkout.md"
        ],
        "keywords": [
          "checkout",
          "order",
          "payment",
          "cart"
        ]
      }
    },
    "features": {
      "demo-checkout": [
        "checkout"
      ]
    }
  }
}
