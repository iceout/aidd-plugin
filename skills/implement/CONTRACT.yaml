---
{
  "schema": "aidd.skill_contract.v1",
  "skill_id": "implement",
  "stage": "implement",
  "entrypoints": [
    "skills/aidd-loop/runtime/preflight_prepare.py",
    "skills/implement/runtime/implement_run.py",
    "skills/aidd-docio/runtime/actions_apply.py"
  ],
  "reads": {
    "required": [
      "aidd/reports/context/{ticket}/{scope_key}.readmap.md",
      "aidd/reports/loops/{ticket}/{scope_key}.loop.pack.md#AIDD:WORK_ITEM",
      "aidd/reports/loops/{ticket}/{scope_key}.loop.pack.md#AIDD:BOUNDARIES"
    ],
    "optional": [
      "aidd/reports/loops/{ticket}/{scope_key}/review.latest.pack.md",
      "aidd/reports/context/{ticket}.pack.md#AIDD:CONTEXT_PACK",
      "aidd/docs/tasklist/{ticket}.md@handoff:review"
    ]
  },
  "writes": {
    "files": [
      "aidd/reports/actions/{ticket}/{scope_key}/implement.actions.template.json",
      "aidd/reports/actions/{ticket}/{scope_key}/implement.actions.json",
      "aidd/reports/actions/{ticket}/{scope_key}/implement.apply.jsonl",
      "aidd/reports/context/{ticket}/{scope_key}.readmap.json",
      "aidd/reports/context/{ticket}/{scope_key}.readmap.md",
      "aidd/reports/context/{ticket}/{scope_key}.writemap.json",
      "aidd/reports/context/{ticket}/{scope_key}.writemap.md",
      "aidd/reports/loops/{ticket}/{scope_key}/stage.preflight.result.json",
      "aidd/reports/logs/implement/{ticket}/{scope_key}/"
    ],
    "patterns": [
      "aidd/reports/actions/{ticket}/{scope_key}/**",
      "aidd/reports/logs/implement/{ticket}/{scope_key}/**",
      "aidd/reports/context/{ticket}/{scope_key}.*",
      "aidd/reports/loops/{ticket}/{scope_key}/stage.preflight.result.json"
    ],
    "blocks": [
      "aidd/docs/tasklist/{ticket}.md#AIDD:ITERATIONS_FULL",
      "aidd/docs/tasklist/{ticket}.md#AIDD:PROGRESS_LOG",
      "aidd/docs/tasklist/{ticket}.md#AIDD:NEXT_3",
      "aidd/reports/context/{ticket}.pack.md#AIDD:READ_LOG",
      "aidd/reports/context/{ticket}.pack.md#AIDD:READ_NEXT"
    ],
    "via": {
      "docops_only": [
        "aidd/docs/tasklist/{ticket}.md",
        "aidd/reports/context/{ticket}.pack.md"
      ]
    }
  },
  "outputs": [
    "aidd/reports/actions/{ticket}/{scope_key}/implement.actions.json",
    "aidd/reports/actions/{ticket}/{scope_key}/implement.apply.jsonl",
    "aidd/reports/loops/{ticket}/{scope_key}/stage.implement.result.json"
  ],
  "gates": {
    "before": [
      "set-active-feature",
      "set-active-stage",
      "prd-check",
      "loop-pack",
      "preflight"
    ],
    "after": [
      "actions-validate",
      "actions-apply",
      "diff-boundary-check",
      "progress",
      "stage-result",
      "status-summary"
    ]
  },
  "context_budget": {
    "max_read_items": 4,
    "prefer_slice": true,
    "max_context_chars": 12000
  },
  "actions": {
    "schema": "aidd.actions.v1",
    "required": true,
    "allowed_types": [
      "tasklist_ops.set_iteration_done",
      "tasklist_ops.append_progress_log",
      "tasklist_ops.next3_recompute",
      "context_pack_ops.context_pack_update"
    ]
  }
}
